<aura:component implements="forceCommunity:availableForAllPageTypes" controller="AuraShoppingCartController" access="global">

    <aura:attribute name="cartData" type="Object[]" access="public"/>
    <aura:attribute name="flipPending" type="Boolean" access="private" default="false"/>
    <aura:attribute name="checkOutUnclicked" type="Boolean" access="private" default="true"/>
    <aura:attribute name="placeOrderUnclicked" type="Boolean" access="private" default="true"/>
    <aura:registerEvent name="refresh" type="c:CartEvent" />
    
    <aura:if isTrue="{!v.checkOutUnclicked}">
        <div>
            <aura:if isTrue="{!v.flipPending}">
                <button onclick="{!c.UpdateCart}">Update Cart</button>
                <button onclick="{!c.CancelChanges}">Cancel</button>
            </aura:if>
            <button onclick="{!c.CheckOut}" class="checkout-button">Check Out</button>
            <div class="cart-items">
                <aura:iteration items="{!v.cartData}" var="item" indexVar="index">
                    <aura:if isTrue="{!!item.remove}">
                        <c:productCard 
                            onremove="{!c.HandleRemove}" 
                            onchangequantity="{!c.HandleChangeQuantity}" 
                            accessId="{!index}"
                            isCartItem="{!true}"
                            itemData="{!item}">
                        </c:productCard>
                    </aura:if>
                </aura:iteration>
            </div>
        </div>
    </aura:if>

    <aura:if isTrue="{!!v.checkOutUnclicked}">
        <aura:if isTrue="{!v.placeOrderUnclicked}">
            <c:paymentInformation 
            accountName="NameGoesHere"
            onsubmitInfo="{!c.PlaceOrder}"
            ></c:paymentInformation>
        </aura:if>
    </aura:if>

    <aura:if isTrue="{!!v.placeOrderUnclicked}">
         <c:orderConfirmation></c:orderConfirmation>         
    </aura:if>




</aura:component>	
